set encoding=utf8
using modex Numex-modex.xml
using groups Numex
set defaultAction=>CreateSpecificEntity()

@NumForm=(t_comma_number,t_dot_number,t_integer)

@Number=(
t_comma_number,t_dot_number,t_integer,
deux$NC,
trois$NC,
quatre$NC,
cinq$NC,
six$NC,
sept$NC,
huit$NC,
neuf$NC,
dix$NC,
onze$NC,
douze$NC,
treize$NC,
quatorze$NC,
quinze$NC,
seize$NC,
dix-sept$NC,
dix-huit$NC,
dix-neuf$NC,
vingt$NC,
vingts$NC,
vingt-deux$NC,
vingt-trois$NC,
vingt-quatre$NC,
vingt-cinq$NC,
vingt-six$NC,
vingt-sept$NC,
vingt-huit$NC,
vingt-neuf$NC,
trente$NC,
trente-deux$NC,
trente-trois$NC,
trente-quatre$NC,
trente-cinq$NC,
trente-six$NC,
trente-sept$NC,
trente-huit$NC,
trente-neuf$NC,
quarante$NC,
quarante-deux$NC,
quarante-trois$NC,
quarante-quatre$NC,
quarante-cinq$NC,
quarante-six$NC,
quarante-sept$NC,
quarante-huit$NC,
quarante-neuf$NC,
cinquante$NC,
cinquante-deux$NC,
cinquante-trois$NC,
cinquante-quatre$NC,
cinquante-cinq$NC,
cinquante-six$NC,
cinquante-sept$NC,
cinquante-huit$NC,
cinquante-neuf$NC,
soixante$NC,
soixante-deux$NC,
soixante-trois$NC,
soixante-quatre$NC,
soixante-cinq$NC,
soixante-six$NC,
soixante-sept$NC,
soixante-huit$NC,
soixante-neuf$NC,
septante$NC,
septante-deux$NC,
septante-trois$NC,
septante-quatre$NC,
septante-cinq$NC,
septante-six$NC,
septante-sept$NC,
septante-huit$NC,
septante-neuf$NC,
soixante-dix$NC,
soixante-douze$NC,
soixante-treize$NC,
soixante-quatorze$NC,
soixante-quinze$NC,
soixante-seize$NC,
soixante-dix-sept$NC,
soixante-dix-huit$NC,
soixante-dix-neuf$NC,
huitante$NC,
huitante-deux$NC,
huitante-trois$NC,
huitante-quatre$NC,
huitante-cinq$NC,
huitante-six$NC,
huitante-sept$NC,
huitante-huit$NC,
huitante-neuf$NC,
octante$NC,
octante-deux$NC,
octante-trois$NC,
octante-quatre$NC,
octante-cinq$NC,
octante-six$NC,
octante-sept$NC,
octante-huit$NC,
octante-neuf$NC,
quatre-vingt$NC,
quatre-vingts$NC,
quatre-vingt-un$NC,
quatre-vingt-deux$NC,
quatre-vingt-trois$NC,
quatre-vingt-quatre$NC,
quatre-vingt-cinq$NC,
quatre-vingt-six$NC,
quatre-vingt-sept$NC,
quatre-vingt-huit$NC,
quatre-vingt-neuf$NC,
nonante$NC,
nonante-deux$NC,
nonante-trois$NC,
nonante-quatre$NC,
nonante-cinq$NC,
nonante-six$NC,
nonante-sept$NC,
nonante-huit$NC,
nonante-neuf$NC,
quatre-vingt-dix$NC,
quatre-vingt-onze$NC,
quatre-vingt-douze$NC,
quatre-vingt-treize$NC,
quatre-vingt-quatorze$NC,
quatre-vingt-quinze$NC,
quatre-vingt-seize$NC,
quatre-vingt-dix-sept$NC,
quatre-vingt-dix-huit$NC,
quatre-vingt-dix-neuf$NC,
cent$NC,
cents$NC,
mille$NC
)


@OrdNumber=(
billionième$NC,
centième$NC,
cinquantième$NC,
cinquième$NC,
deuxième$NC,
dixième$NC,
douzième$NC,
huitantième$NC,
huitième$NC,
milliardième$NC,
millionième$NC,
millième$NC,
neuvième$NC,
onzième$NC,
premier$NC,
quarantième$NC,
quatorzième$NC,
quatre-vingtième$NC,
quatrième$NC,
quinzième$NC,
seizième$NC,
septantième$NC,
septième$NC,
sixième$NC,
soixantième$NC,
ter$NC,
treizième$NC,
trentième$NC,
trillionème$NC,
troisième$NC,
unième$NC,
vingtième$NC
)

@NumberAfterConj=(un,onze,demi)

un:::NOT_NUMBER:
une:::NOT_NUMBER:
le:::NOT_NUMBER:
Le:::NOT_NUMBER:
LE:::NOT_NUMBER:

@ChiffreAines=(dizaine$NC,centaine$NC,millier$NC,million$NC,milliard$NC,quelque$DET,quelques$DET,plusieurs$DET)

# without units: numbers
@ChiffreAines:(un|1|une):((et @NumberAfterConj)|@Number){0-n}:NUMBER:=>NormalizeNumber()
@ChiffreAines:@Number?:((et @NumberAfterConj)|@Number){0-n}:NUMBER:=>NormalizeNumber()
@ChiffreAines::de @ChiffreAines:NUMBER:NormalizeNumber()



# In sport scores like "1 - 1", each integer is a number and the - is not a minus sign
@NumForm:[@NumForm] [(+|-)]::NUMBER:=>NormalizeNumber()


@Decimal=(t_comma_number,t_dot_number)
@SmallDecimalGroup=(t_integer<100)
@IntegerGroup=(t_integer>99<1000)
@LargeNumber=(t_integer>1000)

### Numbers in digits

# 1 234.5
# 12 345.6
# 12 345 678.9
# but also errors like: 12 345 6.7
@SmallDecimalGroup:(+|-)?:@IntegerGroup{0-3} (@Decimal|@IntegerGroup) @ChiffreAines? \%?:NUMBER:=>NormalizeNumber()

# 123 456.7
@IntegerGroup:(+|-)?:@IntegerGroup{0-3} (@Decimal|@IntegerGroup) @ChiffreAines? \%?:NUMBER:=>NormalizeNumber()

# 12
@SmallDecimalGroup:(+|-)?:@ChiffreAines? \%?:NUMBER:=>NormalizeNumber()

# 12345
# 1234 millions
@LargeNumber:(+|-)?:@ChiffreAines? \%?:NUMBER:=>NormalizeNumber()


# 12.3
# 123.4
# 12345.6
@Decimal:(+|-)?:@ChiffreAines? \%?:NUMBER:=>NormalizeNumber()

@NumForm:(+|-)?:(@NumForm|@Number)? \%?:NUMBER:=>NormalizeNumber()
@Number:(+|-)?:@Number{0-5} @ChiffreAines? \%?:NUMBER:=>NormalizeNumber()
@OrdNumber:(+|-)?:\%?:NUMBER:=>NormalizeNumber()
